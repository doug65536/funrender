#!/bin/bash

declare -a captured_vars=(
    CC
    CFLAGS
    CXX
    CXXFLAGS
    CPP
    CPPFLAGS
    LD
    LDFLAGS
    LD_LIBRARY_PATH
    RM
    LN
    PKG_CONFIG
    PKG_CONFIG_PATH
    OBJDUMP
    OBJCOPY
    RANLIB
    AR
)

echo '### This file is automatically generated by `configure`' > config.mk
for name in ${captured_vars[@]}; do
    value=${!name}
    if [[ -n "$value" ]]; then
        echo "$name=$value" >> config.mk
    fi
done
